/**
 * @layer â€” Cascade Layers
 *
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/At-rules/@layer
 * Baseline: ðŸŸ¢ Widely Available
 * Support: 95%
 *
 * Task: Control specificity and cascade order without selector hacks
 * Why: @layer lets you define explicit precedence between style origins,
 *      making specificity predictable and eliminating !important wars
 * Last verified: 2026-02
 */


/* ==========================================================================
   1. DECLARING LAYER ORDER â€” sets priority (last declared = highest)
   ========================================================================== */

/* Declare order upfront â€” later layers override earlier ones */
@layer reset, base, components, utilities;


/* ==========================================================================
   2. RESET LAYER â€” lowest priority, normalize browser defaults
   ========================================================================== */

@layer reset {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }
}


/* ==========================================================================
   3. BASE LAYER â€” element-level defaults
   ========================================================================== */

@layer base {
  body {
    font-family: system-ui, sans-serif;
    color: light-dark(#1a1a1a, #f0f0f0);
    background: light-dark(#fff, #111);
    color-scheme: light dark;
  }

  a {
    color: light-dark(#0066cc, #66b3ff);
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  img {
    max-inline-size: 100%;
    block-size: auto;
    display: block;
  }
}


/* ==========================================================================
   4. COMPONENTS LAYER â€” reusable UI patterns
   ========================================================================== */

@layer components {
  /* Even though .btn has lower specificity than #nav a,
     component-layer styles override base-layer styles */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding-block: 0.5rem;
    padding-inline: 1rem;
    border: 2px solid currentColor;
    border-radius: 0.375rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
  }

  .btn--primary {
    background: light-dark(#0066cc, #3399ff);
    color: white;
    border-color: transparent;
  }

  .card {
    padding: 1.5rem;
    border-radius: 0.75rem;
    background: light-dark(#f8f8f8, #222);
    border: 1px solid light-dark(#e0e0e0, #333);
  }

  .card__title {
    font-size: 1.25rem;
    font-weight: 700;
    margin-block-end: 0.5rem;
  }
}


/* ==========================================================================
   5. UTILITIES LAYER â€” highest priority, single-purpose overrides
   ========================================================================== */

@layer utilities {
  /* These always win over components/base â€” no need for !important */
  .visually-hidden {
    position: absolute;
    inline-size: 1px;
    block-size: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip-path: inset(50%);
    white-space: nowrap;
    border: 0;
  }

  .text-center {
    text-align: center;
  }

  .flex-row {
    display: flex;
    flex-direction: row;
    gap: 1rem;
  }

  .gap-lg {
    gap: 2rem;
  }

  .mt-1 {
    margin-block-start: 0.5rem;
  }

  .mt-2 {
    margin-block-start: 1rem;
  }
}


/* ==========================================================================
   6. NESTED LAYERS â€” sublayer within a parent layer
   ========================================================================== */

@layer components {
  /* Nest layers for finer control within a category */
  @layer forms {
    .input {
      padding-block: 0.5rem;
      padding-inline: 0.75rem;
      border: 1px solid light-dark(#ccc, #555);
      border-radius: 0.375rem;
      font: inherit;
    }

    .input:focus-visible {
      outline: 2px solid light-dark(#0066cc, #3399ff);
      outline-offset: 2px;
    }
  }

  @layer feedback {
    /* feedback sublayer overrides forms sublayer within components */
    .input--error {
      border-color: light-dark(#cc0000, #ff4444);
    }
  }
}

/* Dot notation for appending to nested layers */
@layer components.forms {
  .textarea {
    resize: vertical;
    min-block-size: 6rem;
  }
}


/* ==========================================================================
   7. ANONYMOUS LAYERS â€” unnamed, ordered by appearance
   ========================================================================== */

@layer {
  /* Anonymous layers cannot be appended to later.
     Useful for third-party CSS you want at a specific priority. */
  .third-party-widget {
    padding: 1rem;
    border: 1px solid #ccc;
  }
}


/* ==========================================================================
   8. !important IN LAYERS â€” priority reverses for !important
   ========================================================================== */

/*
 * Normal:    reset < base < components < utilities < unlayered
 * !important: unlayered < utilities < components < base < reset
 *
 * This means !important in reset beats !important in utilities.
 * Use this for defensive resets that must never be overridden.
 */

@layer reset {
  /* This !important declaration has HIGHER priority than
     !important in utilities because layer order reverses */
  [hidden] {
    display: none !important;
  }
}


/* ==========================================================================
   9. UNLAYERED STYLES â€” override all normal layered styles
   ========================================================================== */

/* Styles outside any @layer always beat normal layered styles.
   This is useful for page-specific overrides. */
.page-hero .btn {
  font-size: 1.25rem;
  padding-block: 0.75rem;
  padding-inline: 1.5rem;
}


/* ==========================================================================
   10. @import WITH LAYERS â€” assign imported stylesheets to layers
   ========================================================================== */

/*
 * @import url("reset.css") layer(reset);
 * @import url("framework.css") layer(components);
 * @import url("overrides.css") layer(utilities);
 *
 * This is how you layer third-party CSS without modifying it.
 */
