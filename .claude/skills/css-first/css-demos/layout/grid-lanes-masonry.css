/**
 * CSS Grid Lanes â€” Masonry Layout
 *
 * WebKit: https://webkit.org/blog/17660/introducing-css-grid-lanes/
 * Reference: https://css-tricks.com/masonry-layout-is-now-grid-lanes/
 * Baseline: ðŸŸ£ Experimental (Safari TP 234+, Firefox behind flag)
 *
 * Task: Create masonry (waterfall) layouts with pure CSS
 * Why: display: grid-lanes gives Pinterest-style layouts without JS,
 *      using familiar grid syntax for columns, spanning, and placement
 * Last verified: 2026-02
 */


/* ==========================================================================
   1. BASIC MASONRY â€” responsive waterfall columns
   ========================================================================== */

.masonry {
  display: grid-lanes;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

/* Items automatically flow into the shortest column.
   No fixed row height â€” each item keeps its natural block-size. */
.masonry > * {
  border-radius: 0.5rem;
  overflow: hidden;
}


/* ==========================================================================
   2. FIXED COLUMN COUNT â€” explicit lane definitions
   ========================================================================== */

.masonry-3col {
  display: grid-lanes;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.5rem;
}

.masonry-4col {
  display: grid-lanes;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}


/* ==========================================================================
   3. SPANNING MULTIPLE LANES â€” wide items
   ========================================================================== */

.masonry-spanning {
  display: grid-lanes;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
}

/* Featured item spans 2 columns */
.masonry-spanning .featured {
  grid-column: span 2;
}

/* Full-width banner spans all columns */
.masonry-spanning .banner {
  grid-column: 1 / -1;
}


/* ==========================================================================
   4. EXPLICIT PLACEMENT â€” position items in specific lanes
   ========================================================================== */

.masonry-placed {
  display: grid-lanes;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}

/* Pin item to last two lanes using negative indices */
.masonry-placed .sidebar-promo {
  grid-column: -3 / -1;
}

/* Pin item to first lane */
.masonry-placed .pinned {
  grid-column: 1;
}


/* ==========================================================================
   5. PHOTO GALLERY â€” classic Pinterest-style layout
   ========================================================================== */

.gallery {
  display: grid-lanes;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 0.5rem;
}

.gallery img {
  inline-size: 100%;
  block-size: auto;
  display: block;
  border-radius: 0.375rem;
}

/* Hero photo spans 2 lanes */
.gallery .hero-photo {
  grid-column: span 2;
}


/* ==========================================================================
   6. CARD MASONRY â€” variable-height content cards
   ========================================================================== */

.card-masonry {
  display: grid-lanes;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.25rem;
}

.card-masonry .card {
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: light-dark(#f8f8f8, #1e1e1e);
  border: 1px solid light-dark(#e0e0e0, #333);
}

.card-masonry .card__title {
  font-size: 1.125rem;
  font-weight: 700;
  margin-block-end: 0.5rem;
}

.card-masonry .card__body {
  color: light-dark(#555, #aaa);
  line-height: 1.6;
}

/* Testimonial cards with extra padding */
.card-masonry .card--quote {
  padding: 2rem;
  border-inline-start: 4px solid light-dark(#0066cc, #3399ff);
  font-style: italic;
}


/* ==========================================================================
   7. HORIZONTAL MASONRY â€” row-based "brick" layout
   ========================================================================== */

/* Define rows instead of columns for a horizontal brick pattern */
.brick-layout {
  display: grid-lanes;
  grid-template-rows: repeat(auto-fill, minmax(120px, 1fr));
  gap: 0.75rem;

  /* Constrain block-size so rows wrap */
  block-size: 600px;
}


/* ==========================================================================
   8. RESPONSIVE MASONRY â€” adapt columns at breakpoints
   ========================================================================== */

.masonry-responsive {
  display: grid-lanes;
  grid-template-columns: 1fr;
  gap: 1rem;
}

@media (width >= 600px) {
  .masonry-responsive {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (width >= 900px) {
  .masonry-responsive {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (width >= 1200px) {
  .masonry-responsive {
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
  }
}


/* ==========================================================================
   9. PROGRESSIVE ENHANCEMENT â€” fallback for unsupported browsers
   ========================================================================== */

/* Regular grid fallback â€” items will have equal row height */
.masonry-enhanced {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

/* Upgrade to masonry where supported */
@supports (display: grid-lanes) {
  .masonry-enhanced {
    display: grid-lanes;
  }
}
