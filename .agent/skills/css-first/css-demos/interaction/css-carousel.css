/**
 * CSS Carousel â€” Slider, Tabs, Scroll Spy, Series
 *
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Overflow/Carousels
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/::scroll-button
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/::scroll-marker-group
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/::scroll-marker
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/:target-current
 * Baseline: ðŸŸ£ Experimental
 * Support: Chrome 135+
 *
 * Task: Build carousels, tabs, and scroll spy with only CSS
 * Why: New CSS carousel pseudo-elements handle navigation, pagination,
 *      tab switching, and scroll tracking â€” zero JavaScript needed
 * Last verified: 2026-02
 */


/* ==========================================================================
   1. HORIZONTAL SLIDER
   Core: scroll-snap + ::scroll-button + ::scroll-marker + :target-current
   ========================================================================== */

.slider {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 100%;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-marker-group: after;              /* place dot indicators after content */
  anchor-name: --slider;                   /* anchor for button positioning */
}

.slider__slide {
  scroll-snap-align: center;
  scroll-snap-stop: always;
  container-type: scroll-state;            /* enables scroll-state() queries */
}

/* Prev / Next buttons â€” generated by the browser */
.slider::scroll-button(left) {
  content: "\25C4" / "Previous slide";     /* content / accessible name */
}

.slider::scroll-button(right) {
  content: "\25BA" / "Next slide";
}

.slider::scroll-button(*) {
  position: absolute;
  position-anchor: --slider;
}

.slider::scroll-button(*):disabled {
  display: none;
}

/* Dot indicator group */
.slider::scroll-marker-group {
  display: flex;
  justify-content: center;
  gap: 0.75rem;
}

/* Individual dot per slide */
.slider__slide::scroll-marker {
  content: "";
}

.slider__slide::scroll-marker:target-current {
  /* active dot */
}

/* Snap-aware content â€” fades in only when snapped */
@container scroll-state(snapped: inline) {
  .slider__slide > * {
    opacity: 1;
  }
}

@container not scroll-state(snapped: inline) {
  .slider__slide > * {
    opacity: 0.3;
  }
}


/* ==========================================================================
   2. TABS
   Core: scroll-marker-group: before + ::scroll-marker with data-label
   ========================================================================== */

.tabs {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 100%;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  scroll-marker-group: before;             /* tab bar goes above panels */
  anchor-name: --tabs;
}

/* Tab bar */
.tabs::scroll-marker-group {
  position: absolute;
  position-anchor: --tabs;
  inset-block-end: anchor(top);
  inset-inline-start: anchor(left);
  inset-inline-end: anchor(right);
  display: flex;
  gap: 0.25rem;
}

/* Individual tab â€” label comes from HTML data attribute */
.tabs__panel {
  scroll-snap-align: start;
}

.tabs__panel::scroll-marker {
  content: attr(data-label);               /* <div class="tabs__panel" data-label="Settings"> */
}

.tabs__panel::scroll-marker:target-current {
  /* active tab */
}

.tabs__panel::scroll-marker:focus-visible {
  /* keyboard focus ring */
}


/* ==========================================================================
   3. SCROLL SPY
   Core: vertical scroll + ::scroll-marker-group as sidebar nav
   ========================================================================== */

.scroll-spy {
  display: grid;
  grid-template-areas: "nav content";
  grid-template-columns: 12rem 1fr;
  overflow: hidden;
}

.scroll-spy__content {
  grid-area: content;
  overflow-y: auto;
  scroll-snap-type: y proximity;
  scroll-marker-group: before;             /* nav markers go before content */
}

/* Sidebar nav generated from markers */
.scroll-spy__content::scroll-marker-group {
  grid-area: nav;
  display: flex;
  flex-direction: column;
}

/* Each section generates a nav link */
.scroll-spy__section {
  scroll-snap-align: start;
}

.scroll-spy__section::scroll-marker {
  content: attr(data-label);               /* <section data-label="Introduction"> */
}

.scroll-spy__section::scroll-marker:target-current {
  /* currently visible section */
}

.scroll-spy__section::scroll-marker:target-before {
  /* sections already scrolled past */
}


/* ==========================================================================
   4. SERIES CAROUSEL (Netflix-style)
   Core: multi-item grid + season markers + scroll-state snapping
   ========================================================================== */

.series {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 22rem;
  gap: 1rem;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-marker-group: before;             /* season labels above */
  anchor-name: --series;
}

/* Season markers â€” only first episode of each season */
.series::scroll-marker-group {
  position: absolute;
  position-anchor: --series;
  inset-inline-start: anchor(left);
  inset-block-end: anchor(top);
  display: flex;
  gap: 2rem;
}

.series__episode {
  scroll-snap-align: start;
  container-type: scroll-state;
}

/* Season label from data attribute */
.series__episode.season-start::scroll-marker {
  content: "Season " attr(data-season);    /* <div class="season-start" data-season="2"> */
}

.series__episode.season-start::scroll-marker:target-current {
  /* active season */
}

/* Snap-aware episode cards */
@container scroll-state(snapped: inline) {
  .series__episode img {
    filter: none;
  }
}

@container not scroll-state(snapped: inline) {
  .series__episode img {
    filter: grayscale(1);
  }
}

/* Prev / Next */
.series::scroll-button(left) {
  content: "\25C4" / "Previous";
}

.series::scroll-button(right) {
  content: "\25BA" / "Next";
}

.series::scroll-button(*) {
  position: absolute;
  position-anchor: --series;
}

.series::scroll-button(*):disabled {
  display: none;
}
