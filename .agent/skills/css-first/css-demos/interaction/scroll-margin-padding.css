/**
 * scroll-margin & scroll-padding
 *
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-margin
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-padding
 * Baseline: ðŸŸ¢ Widely Available (since 2021)
 * Support: 96%
 *
 * Task: Prevent anchor-linked sections from scrolling behind fixed navigation
 * Why: Pure CSS offset for scroll targets â€” no JavaScript scroll offset hacks
 */


/* ==========================================================================
   THE PROBLEM â€” sections scroll behind fixed nav

   HTML:
     <nav class="main-nav">...</nav>
     <section id="about">...</section>
     <a href="#about">Go to About</a>

   When clicking the anchor link, #about scrolls flush to the viewport top,
   hidden behind the fixed nav.

   Two solutions:
   â€¢ scroll-margin-block-start  â†’ on the TARGET element
   â€¢ scroll-padding-block-start â†’ on the SCROLL CONTAINER
   ========================================================================== */


/* ==========================================================================
   1. scroll-margin-block-start â€” BEST PRACTICE for fixed nav offset
   Applied to each scroll target section.
   ========================================================================== */

:root {
  --nav-block-size: 4rem;
}

.main-nav {
  position: fixed;
  inset-block-start: 0;
  inset-inline: 0;
  block-size: var(--nav-block-size);
  z-index: 1;
}

/* Every section with an id is a scroll target */
section[id] {
  scroll-margin-block-start: var(--nav-block-size);
}

/* Also works on any anchor target */
:target {
  scroll-margin-block-start: var(--nav-block-size);
}


/* ==========================================================================
   2. scroll-padding-block-start â€” on the scroll container
   Alternative: set once on html/body instead of every section.
   ========================================================================== */

html {
  scroll-padding-block-start: var(--nav-block-size);
}


/* ==========================================================================
   3. WHEN TO USE WHICH

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ scroll-padding         â”‚ scroll-margin                    â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ On the scroll container â”‚ On the scroll target element     â”‚
   â”‚ Set once, affects all  â”‚ Per-element, different offsets    â”‚
   â”‚ Like padding inward    â”‚ Like margin outward              â”‚
   â”‚ Best for: fixed nav    â”‚ Best for: varied target offsets  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ========================================================================== */


/* ==========================================================================
   4. STICKY NAV (not fixed) â€” same pattern works
   ========================================================================== */

.sticky-nav {
  position: sticky;
  inset-block-start: 0;
  block-size: var(--nav-block-size);
}

/* scroll-padding on the nearest scroll container */
.page-wrapper {
  overflow-y: auto;
  scroll-padding-block-start: var(--nav-block-size);
}


/* ==========================================================================
   5. MULTIPLE FIXED ELEMENTS â€” stack offsets
   Fixed nav + fixed banner = sum of both heights.
   ========================================================================== */

:root {
  --banner-block-size: 2.5rem;
  --total-fixed-offset: calc(var(--nav-block-size) + var(--banner-block-size));
}

html:has(.announcement-banner) {
  scroll-padding-block-start: var(--total-fixed-offset);
}


/* ==========================================================================
   6. SCROLL SNAP + scroll-margin
   Prevents snapped items from sitting flush against container edge.
   ========================================================================== */

.snap-container {
  scroll-snap-type: y mandatory;
  scroll-padding-block: 1rem;         /* breathing room at top and bottom */
}

.snap-container > section {
  scroll-snap-align: start;
  scroll-margin-block-start: 1rem;    /* per-item offset */
}


/* ==========================================================================
   7. HORIZONTAL SCROLL + scroll-margin-inline
   Carousel items offset from container edges.
   ========================================================================== */

.carousel {
  display: flex;
  gap: 1rem;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  scroll-padding-inline: 1rem;        /* inset from both edges */
}

.carousel > * {
  scroll-snap-align: start;
  scroll-margin-inline-start: 1rem;
  flex: 0 0 min(80%, 20rem);
}


/* ==========================================================================
   8. LOGICAL PROPERTIES â€” full list

   Physical              Logical
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   scroll-margin-top     scroll-margin-block-start
   scroll-margin-bottom  scroll-margin-block-end
   scroll-margin-left    scroll-margin-inline-start
   scroll-margin-right   scroll-margin-inline-end

   scroll-padding-top    scroll-padding-block-start
   scroll-padding-bottom scroll-padding-block-end
   scroll-padding-left   scroll-padding-inline-start
   scroll-padding-right  scroll-padding-inline-end

   Shorthands:
   scroll-margin-block:  <start> <end>
   scroll-margin-inline: <start> <end>
   scroll-padding-block: <start> <end>
   scroll-padding-inline:<start> <end>

   âœ… Always prefer logical properties (block/inline).
   ========================================================================== */


/* ==========================================================================
   9. DYNAMIC NAV HEIGHT â€” adapt with container query units
   If nav height can change (e.g. wrapping on small screens).
   ========================================================================== */

.main-nav {
  container-type: inline-size;
}

/* Use a CSS variable updated via :has() or media query */
@media (width < 40rem) {
  :root {
    --nav-block-size: 6rem;            /* taller nav on mobile */
  }
}
